<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script>
        function addAlert(type, text, timeout) {
            type = type || "primary";
            text = text || "Lorem ipsum dolor sit amet.";
            timeout = timeout || 2000;

            let types = ["primary", 'secondary', 'success', 'danger', 'warning', 'info', 'light', 'dark'];
            type = types[ Math.floor(Math.random()*types.length)];

            let alertNode = document.createElement("div");
            alertNode.classList.add("alert", "alert-"+type, "alert-dismissible", "fade", "show");
            alertNode.setAttribute("role", "alert");
            
            let alertCode = `
                <h4 class="alert-heading">.alert-${type}</h4>
                <p>${text}</p>
                <button class="btn-close" type="button" data-bs-dismiss="alert" aria-label="close"></button>
            `;
            alertNode.innerHTML = alertCode;
            let alertContainer = document.getElementById("alert-container");
            
            let alertInstance = new bootstrap.Alert(alertNode);

            setTimeout(function(){
                alertInstance.close();
            }, timeout);

            alertNode.addEventListener("close.bs.alert", (e) => {
                console.log("close.bs.alert: alert-" + type + " zamkniety");
            })

            alertNode.addEventListener("closed.bs.alert", (e) => {
                console.log("closed.bs.alert: alert-" + type + " zamkniety");
            })

            // alertContainer.appendChild(alertNode);
            alertContainer.prepend(alertNode);
        }
    </script>
</head>
<body>
    <div class="container">
        <button class="btn-primary m-1" onclick="addAlert();">Dodaj alert</button>
    </div>
    <div id="alert-container" class="container m-1">
        <div class="alert alert-primary alert-dismissible fade show" role="alert">
            <h4>.alert-primary</h4>
            <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quo, saepe. 
                <a href="#" class="alert-link">alert-link</a>
            </p>
            <button class="btn-close" type="button" data-bs-dismiss="alert" aria-label="close"></button>
        </div>
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
            <h4>.alert-danger</h4>
            <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quo, saepe.
                <a href="#" class="alert-link">alert-link</a>
            </p>
            <button class="btn-close" type="button" data-bs-dismiss="alert" aria-label="close"></button>
        </div>
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            <h4>.alert-success</h4>
            <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quo, saepe.
                <a href="#" class="alert-link">alert-link</a>
            </p>
            <button class="btn-close" type="button" data-bs-dismiss="alert" aria-label="close"></button>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
        integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
        integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
        crossorigin="anonymous"></script>
</body>
</html>